# ==============================================================================
# AI Trend Intelligence Platform - Environment Configuration
# ==============================================================================

# ------------------------------------------------------------------------------
# OpenAI API Configuration
# ------------------------------------------------------------------------------
OPENAI_API_KEY=your_api_key_here

# ------------------------------------------------------------------------------
# YouTube API Configuration
# ------------------------------------------------------------------------------
YOUTUBE_API_KEY=your_youtube_api_key_here

# ------------------------------------------------------------------------------
# Mock API Mode (for testing without consuming API credits)
# ------------------------------------------------------------------------------
# Set to 1 for mock/testing, 0 for real API calls
MOCK_API=1

# ------------------------------------------------------------------------------
# Model Configuration
# ------------------------------------------------------------------------------
MODEL=gpt-4o-mini
EMBED_MODEL=text-embedding-3-small

# ------------------------------------------------------------------------------
# Trend Agent Configuration
# ------------------------------------------------------------------------------
MAX_TRENDS=30

# ------------------------------------------------------------------------------
# Django Web Application
# ------------------------------------------------------------------------------
SECRET_KEY=change-this-to-a-random-secret-key-in-production
DJANGO_DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Django Superuser (created automatically on first run)
DB_USER=admin
ADMIN_EMAIL=admin@example.com
DB_PASSWORD=changeme123

# ------------------------------------------------------------------------------
# PostgreSQL Database Configuration
# ------------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=trends
POSTGRES_USER=trend_user
POSTGRES_PASSWORD=trend_password

# ------------------------------------------------------------------------------
# Qdrant Vector Database Configuration
# ------------------------------------------------------------------------------
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_COLLECTION_NAME=trends

# ------------------------------------------------------------------------------
# Redis Cache Configuration
# ------------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ------------------------------------------------------------------------------
# RabbitMQ Message Queue Configuration
# ------------------------------------------------------------------------------
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=trend_user
RABBITMQ_PASSWORD=trend_password
RABBITMQ_VHOST=/

# ------------------------------------------------------------------------------
# FastAPI REST API Configuration
# ------------------------------------------------------------------------------
# API Keys for authentication (comma-separated for multiple keys)
# Generate secure keys with: openssl rand -hex 32
# Or run: ./setup.sh -> Option 10 (Generate API Keys)
API_KEYS=dev_key_placeholder,test_key_placeholder
ADMIN_API_KEYS=admin_key_placeholder

# Rate Limiting
ENABLE_RATE_LIMITING=true
RATE_LIMIT_DEFAULT=100/minute
RATE_LIMIT_SEARCH=30/minute
RATE_LIMIT_ADMIN=1000/hour

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:11800
CORS_ALLOW_CREDENTIALS=true

# ------------------------------------------------------------------------------
# Celery Background Tasks Configuration
# ------------------------------------------------------------------------------
CELERY_BROKER_URL=amqp://trend_user:trend_password@rabbitmq:5672/
CELERY_RESULT_BACKEND=redis://redis:6379/1
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=UTC

# Celery Beat Schedule (for periodic tasks)
CELERY_BEAT_ENABLED=true

# ------------------------------------------------------------------------------
# Alert System Configuration
# ------------------------------------------------------------------------------
# Email Alerts
ENABLE_EMAIL_ALERTS=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USER=alerts@example.com
SMTP_PASSWORD=your_email_password
ALERT_EMAILS=admin@example.com,team@example.com

# Slack Alerts
ENABLE_SLACK_ALERTS=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#alerts

# Alert Thresholds
ALERT_ERROR_THRESHOLD=10
ALERT_LATENCY_THRESHOLD_MS=5000

# ------------------------------------------------------------------------------
# Monitoring & Observability
# ------------------------------------------------------------------------------
# Grafana
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin
GRAFANA_PORT=3000

# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_DAYS=30

# OpenTelemetry
OTEL_ENABLED=true
OTEL_SERVICE_NAME=trend-platform
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317

# Jaeger Tracing
JAEGER_ENABLED=true
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831

# Loki Logging
LOKI_ENABLED=true
LOKI_URL=http://loki:3100

# ------------------------------------------------------------------------------
# InfluxDB Time Series Database (Optional)
# ------------------------------------------------------------------------------
INFLUXDB_URL=http://influxdb:8086
INFLUXDB_TOKEN=your_influxdb_token
INFLUXDB_ORG=trend-platform
INFLUXDB_BUCKET=metrics

# ------------------------------------------------------------------------------
# LibreTranslate (Self-hosted Translation)
# ------------------------------------------------------------------------------
LIBRETRANSLATE_URL=http://libretranslate:5000
LIBRETRANSLATE_API_KEY=

# ------------------------------------------------------------------------------
# Data Collection Configuration
# ------------------------------------------------------------------------------
# Collection intervals (in minutes)
COLLECTION_INTERVAL_DEFAULT=60
COLLECTION_INTERVAL_HIGH_FREQUENCY=15
COLLECTION_INTERVAL_LOW_FREQUENCY=240

# Maximum items per source
MAX_ITEMS_PER_SOURCE=100
MAX_ITEMS_PER_CATEGORY=5

# Deduplication
DEDUP_SIMILARITY_THRESHOLD=0.85
DEDUP_TIME_WINDOW_HOURS=24

# ------------------------------------------------------------------------------
# Performance & Scaling
# ------------------------------------------------------------------------------
# Worker Configuration
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=100
CELERY_WORKER_PREFETCH_MULTIPLIER=4

# Database Connection Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# Cache TTL (seconds)
CACHE_TTL_DEFAULT=300
CACHE_TTL_TRENDS=60
CACHE_TTL_SEARCH=120

# ------------------------------------------------------------------------------
# Security Configuration
# ------------------------------------------------------------------------------
# Session Security
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# CSRF Protection
CSRF_COOKIE_SECURE=false
CSRF_TRUSTED_ORIGINS=http://localhost:11800,http://localhost:8000

# Content Security Policy
CSP_ENABLED=false

# ------------------------------------------------------------------------------
# Logging Configuration
# ------------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE_ENABLED=false
LOG_FILE_PATH=/var/log/trend-platform/app.log
LOG_FILE_MAX_BYTES=10485760
LOG_FILE_BACKUP_COUNT=5

# ------------------------------------------------------------------------------
# Development & Debugging
# ------------------------------------------------------------------------------
# Hot Reload for Development
DEV_RELOAD=true

# SQL Query Logging
SQL_ECHO=false

# Profiling
PROFILING_ENABLED=false

# ------------------------------------------------------------------------------
# Feature Flags
# ------------------------------------------------------------------------------
ENABLE_GRAPHQL=true
ENABLE_WEBSOCKETS=true
ENABLE_TRANSLATION=true
ENABLE_SUMMARIZATION=true
ENABLE_SEMANTIC_SEARCH=true

# ------------------------------------------------------------------------------
# Notes
# ------------------------------------------------------------------------------
# 1. Change all placeholder values before deploying to production
# 2. Generate secure API keys with: ./setup.sh -> Option 10
# 3. Use strong passwords for database users
# 4. Enable HTTPS in production (set SECURE cookies to true)
# 5. Configure proper alert endpoints for production monitoring
# 6. Set DJANGO_DEBUG=False in production
# 7. Update ALLOWED_HOSTS with your production domains
# 8. Set MOCK_API=0 to use real API calls
